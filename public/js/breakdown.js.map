{"version":3,"sources":["load-templates.js","load-resources.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"breakdown.js","sourcesContent":[";(function(window, document, $){\n\n    $(function(){\n        var breakdowns = {};\n\n        var loader = $('<span class=\"label label-info\"><i class=\"fa fa-refresh fa-spin\"></i> Loading...</span>');\n        var errorMessage = $('<span class=\"label label-danger\"><i class=\"fa fa-exclamation-circle\"></i> <span></span></span>');\n        var templateInput = $('#TemplateID');\n        var breakdownEmptyText = templateInput.find('option[value=\"\"]').text();\n\n        var hideLoader = function () {\n            loader.remove();\n        };\n\n        var showLoader = function () {\n            hideError();\n            templateInput.before(loader);\n        };\n\n        var showError = function (message) {\n            hideLoader();\n            errorMessage.find('span').text(message);\n            templateInput.before(errorMessage);\n        };\n\n        var hideError = function() {\n            errorMessage.remove();\n        };\n\n        var fillBreakdowns = function (options) {\n            var optionsHtml = '<option value=\"\">' + breakdownEmptyText + '</option>';\n            for (var key in options) {\n                optionsHtml += '<option value=\"' + key + '\">' + options[key] + '</option>';\n            }\n            templateInput.html(optionsHtml);\n        };\n\n        $('#ActivityID').on('change', function(){\n            var value = this.value;\n            if (value) {\n                if (breakdowns[value]) {\n                    fillBreakdowns(breakdowns[value]);\n                } else {\n                    showLoader();\n                    $.ajax({ url: '/api/breakdown-template', dataType: 'json', data: {activity: value}})\n                    .then(function(response){\n                        fillBreakdowns(response);\n                        hideLoader();\n                    }, function(response){\n                        showError('Cannot load breakdowns');\n                        fillBreakdowns([]);\n                    });\n                }\n            } else {\n                fillBreakdowns([]);\n            }\n        }).change();\n    });\n\n}(window, document, jQuery));",";(function(window, document, $) {\n\n    //Cache important elements\n    var templateInput = $('#TemplateID');\n    var resourcesContainer = $('#resourcesContainer');\n\n    //Get templates contents\n    var emptyAlert = $('#resourcesEmptyAlert').html();\n    var resourcesLoading = $('#resourcesLoading').html();\n    var resourcesError = $('#resourcesError').html();\n    var containerTemplate = $('#containerTemplate').html();\n    var resourceRowTemplate = $('#resourceRowTemplate').html();\n\n    templateInput.on('change', function(){\n        var value = this.value;\n        if (value) {\n            showLoading();\n            $.ajax({\n                url: '/api/std-activity-resource',\n                data: {template: value},\n                dataType: 'json'\n            }).done(function(response){\n                buildResources(response);\n            }).error(function(response){\n                showError();\n            });\n        } else {\n            showEmpty();\n        }\n    }).change();\n\n    function showLoading() {\n        resourcesContainer.html(resourcesLoading);\n    }\n\n    function showError() {\n        resourcesContainer.html(resourcesError);\n    }\n\n    function showEmpty() {\n        resourcesContainer.html(emptyAlert);\n    }\n\n    function buildResources(resources) {\n        var html = '';\n        var res;\n        var counter = 0;\n        var key;\n\n        var table = $(containerTemplate);\n\n        for (res in resources) {\n            var rowObject = $(resourceRowTemplate.replace(/##/g, counter));\n\n            for (key in resources[res]) {\n                var input = rowObject.find('[j-model=\"' + key + '\"]');\n                input.val(resources[res][key]);\n            }\n\n            table.find('tbody').append(rowObject);\n            counter++;\n        }\n\n        resourcesContainer.html('').append(table);\n    }\n}(window, document, jQuery));"],"sourceRoot":"/source/"}