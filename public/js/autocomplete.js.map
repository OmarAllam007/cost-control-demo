{"version":3,"sources":["autocomplete.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"autocomplete.js","sourcesContent":["(function (window, document, $) {\n    var listTemplate = '<div class=\"panel panel-info autocomplete-panel\"><div class=\"list-group\"></div></div>';\n    var loadingTemplate = '<div class=\"list-group-item text-center\"><i class=\"fa fa-spinner fa-spin\"></i></div>';\n    var loadingError = '<div class=\"list-group-item list-group-item-danger\"><i class=\"fa fa-exclamation-circle\"></i> Error loading options</div>';\n    var emptyTemplate = '<div class=\"list-group-item list-group-item-warning\"><i class=\"fa fa-exclamation-triangle\"></i> No options found</div>'\n\n\n    var buildOptions = function (options) {\n        var isArray = $.isArray(options);\n        var isObject = $.isPlainObject(options);\n\n        if (!(isArray && options.length) && !(isObject && !$.isEmptyObject(options))) {\n            return emptyTemplate;\n        }\n\n        var html = '';\n\n        for (var i in options) {\n            if (options.hasOwnProperty(i)) {\n                var val = isArray ? options[i] : i;\n                html += '<a href=\"#\" class=\"list-group-item option-link\" data-val=\"' + val + '\">' + options[i] + '</a>';\n            }\n        }\n\n        return html;\n    };\n\n    $.fn.completeList = function (options) {\n        $(this).each(function (index, element) {\n            var $element = $(element);\n\n            $element.attr('autocomplete', 'off');\n            $element.parents('.form-group').css({position: 'relative'});\n\n            var $list = $(listTemplate);\n            var $body = $list.find('.list-group');\n\n            var lastValue = '';\n\n            var loadOptions = function () {\n                var optionsHtml = '';\n                var val = $element.val();\n                if (options.options && ($.isArray(options.options) || $.isPlainObject(options.options))) {\n                    optionsHtml = buildOptions(options.options);\n                    $body.html(optionsHtml);\n                } else if ($body.data('options') && lastValue === val) {\n                    optionsHtml = buildOptions($body.data('options'));\n                    $body.html(optionsHtml);\n                } else if (options.url) {\n                    $body.html(loadingTemplate);\n                    $.ajax({\n                        type: 'get',\n                        data: {term: val},\n                        url: options.url,\n                        dataType: 'json'\n                    }).then(function (result) {\n                        lastValue = val;\n                        optionsHtml = buildOptions(result);\n                        $body.html(optionsHtml);\n                    }, function () {\n                        $body.html(loadingError);\n                    });\n                } else {\n                    $body.html(emptyTemplate);\n                }\n            };\n\n            $element.on('focus', function () {\n                loadOptions();\n                $list.show();\n            }).on('blur', function () {\n                setTimeout(function () {\n                    $list.hide();\n                }, 100);\n            }).on('keyup', function (e) {\n                if (e.keyCode != 13 && e.keyCode != 38 && e.keyCode != 40) {\n                    loadOptions();\n                }\n            }).on('keydown', function (e) {\n                if (e.key.toLowerCase() == 'arrowdown') {\n                    if ($list.find('a.active').length == 0) {\n                        $list.find('a').first().addClass('active');\n                    } else {\n                        if ($list.find('a.active').next('a').length) {\n                            $list.find('a.active').removeClass('active').next('a').addClass('active');\n                        }\n                    }\n                } else if (e.key.toLowerCase() == 'arrowup') {\n                    if ($list.find('a.active').length == 0) {\n                        $list.find('a').first().addClass('active');\n                    } else {\n                        if ($list.find('a.active').prev('a').length) {\n                            $list.find('a.active').removeClass('active').prev('a').addClass('active');\n                        }\n                    }\n                }\n            }).on('keyup keydown keypress', function (e) {\n                if (e.keyCode == 13) {\n                    e.preventDefault();\n                    var text = $list.find('a.active').text();\n                    if (text) {\n                        $(this).val(text).change();\n                        $list.hide();\n                    }\n                }\n            });\n\n            $body.on('click', '.option-link', function (e) {\n                e.preventDefault();\n                $element.val($(this).data('val')).change();\n            });\n\n            $element.after($list.hide());\n        });\n    };\n}(window, document, jQuery));"]}