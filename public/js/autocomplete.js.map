{"version":3,"sources":["autocomplete.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"autocomplete.js","sourcesContent":["(function (window, document, $) {\r\n    var listTemplate = '<div class=\"panel panel-info autocomplete-panel\"><div class=\"list-group\"></div></div>';\r\n    var loadingTemplate = '<div class=\"list-group-item text-center\"><i class=\"fa fa-spinner fa-spin\"></i></div>';\r\n    var loadingError = '<div class=\"list-group-item list-group-item-danger\"><i class=\"fa fa-exclamation-circle\"></i> Error loading options</div>';\r\n    var emptyTemplate = '<div class=\"list-group-item list-group-item-warning\"><i class=\"fa fa-exclamation-triangle\"></i> No options found</div>'\r\n\r\n\r\n    var buildOptions = function (options) {\r\n        var isArray = $.isArray(options);\r\n        var isObject = $.isPlainObject(options);\r\n\r\n        if (!(isArray && options.length) && !(isObject && !$.isEmptyObject(options))) {\r\n            return emptyTemplate;\r\n        }\r\n\r\n        var html = '';\r\n\r\n        for (var i in options) {\r\n            if (options.hasOwnProperty(i)) {\r\n                var val = isArray ? options[i] : i;\r\n                html += '<a href=\"#\" class=\"list-group-item option-link\" data-val=\"' + val + '\">' + options[i] + '</a>';\r\n            }\r\n        }\r\n\r\n        return html;\r\n    };\r\n\r\n    $.fn.completeList = function (options) {\r\n        $(this).each(function (index, element) {\r\n            var $element = $(element);\r\n\r\n            $element.attr('autocomplete', 'off');\r\n            $element.parents('.form-group').css({position: 'relative'});\r\n\r\n            var $list = $(listTemplate);\r\n            var $body = $list.find('.list-group');\r\n\r\n            var lastValue = '';\r\n\r\n            var loadOptions = function () {\r\n                var optionsHtml = '';\r\n                var val = $element.val();\r\n                if (options.options && ($.isArray(options.options) || $.isPlainObject(options.options))) {\r\n                    optionsHtml = buildOptions(options.options);\r\n                    $body.html(optionsHtml);\r\n                } else if ($body.data('options') && lastValue === val) {\r\n                    optionsHtml = buildOptions($body.data('options'));\r\n                    $body.html(optionsHtml);\r\n                } else if (options.url) {\r\n                    $body.html(loadingTemplate);\r\n                    $.ajax({\r\n                        type: 'get',\r\n                        data: {term: val},\r\n                        url: options.url,\r\n                        dataType: 'json'\r\n                    }).then(function (result) {\r\n                        lastValue = val;\r\n                        optionsHtml = buildOptions(result);\r\n                        $body.html(optionsHtml);\r\n                    }, function () {\r\n                        $body.html(loadingError);\r\n                    });\r\n                } else {\r\n                    $body.html(emptyTemplate);\r\n                }\r\n            };\r\n\r\n            $element.on('focus', function () {\r\n                loadOptions();\r\n                $list.show();\r\n            }).on('blur', function () {\r\n                setTimeout(function () {\r\n                    $list.hide();\r\n                }, 100);\r\n            }).on('keyup', function (e) {\r\n                if (e.keyCode != 13 && e.keyCode != 38 && e.keyCode != 40) {\r\n                    loadOptions();\r\n                }\r\n            }).on('keydown', function (e) {\r\n                if (e.key.toLowerCase() == 'arrowdown') {\r\n                    if ($list.find('a.active').length == 0) {\r\n                        $list.find('a').first().addClass('active');\r\n                    } else {\r\n                        if ($list.find('a.active').next('a').length) {\r\n                            $list.find('a.active').removeClass('active').next('a').addClass('active');\r\n                        }\r\n                    }\r\n                } else if (e.key.toLowerCase() == 'arrowup') {\r\n                    if ($list.find('a.active').length == 0) {\r\n                        $list.find('a').first().addClass('active');\r\n                    } else {\r\n                        if ($list.find('a.active').prev('a').length) {\r\n                            $list.find('a.active').removeClass('active').prev('a').addClass('active');\r\n                        }\r\n                    }\r\n                }\r\n            }).on('keyup keydown keypress', function (e) {\r\n                if (e.keyCode == 13) {\r\n                    e.preventDefault();\r\n                    var text = $list.find('a.active').text();\r\n                    if (text) {\r\n                        $(this).val(text).change();\r\n                        $list.hide();\r\n                    }\r\n                }\r\n            });\r\n\r\n            $body.on('click', '.option-link', function (e) {\r\n                e.preventDefault();\r\n                $element.val($(this).data('val')).change();\r\n            });\r\n\r\n            $element.after($list.hide());\r\n        });\r\n    };\r\n}(window, document, jQuery));"]}